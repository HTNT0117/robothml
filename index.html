<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pepper Recommender</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- style ch√≠nh -->
  <link rel="stylesheet" href="css/style.css">
  <script src="js/jquery-1.11.0.min.js"></script>
  <script>
    function subscribe_PepperQiMessaging() { console.log('üîß [MOCK] subscribe'); }
    window.session = { service:()=>({ done: cb => cb({ raiseEvent:(e,d)=>console.log(`üîß [MOCK] ${e}`, d) }) }) };
  </script>

  <style>
    /* container ch√≠nh */
    #container {
      width:100vw; height:100vh;
      position:relative; overflow:hidden;
    }

    /* GIF full-screen */
    #chitchatScreen {
      display:none;
      position:fixed; top:0; left:0;
      width:100vw; height:100vh;
      background:#000; z-index:999;
    }
    #chitchatScreen img {
      width:100%; height:100%; object-fit:cover;
    }

    /* Message full-screen */
    #messageScreen {
      display: none;      /* ·∫®n m·∫∑c ƒë·ªãnh */
      position: fixed; top:0; left:0;
      width:100vw; height:100vh;
      z-index:1000;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      padding:20px;
      box-sizing:border-box;
    }
    /* n·ªÅn sad.gif m·∫∑c ƒë·ªãnh */
    #messageScreen::before {
      content:"";
      position:absolute; top:0; left:0;
      width:100%; height:100%;
      background: url('img/sad.png') no-repeat center center fixed;
      background-size:cover;
      filter: blur(4px) brightness(0.4);
      z-index:0;
    }
    /* khi c√≥ class face-bg th√¨ d√πng face.gif */
    #messageScreen.face-bg::before {
      background: url('img/face.png') no-repeat center center fixed;
      background-size:cover;
      filter: blur(4px) brightness(0.4);
    }

    /* Text neon */
    #messageText {
      position:relative; z-index:1;
      font-size: clamp(1rem,2.5vw,2.5rem);
      line-height:1.4;
      color:#00ffe8;
      text-shadow:
        0 0 8px rgba(0,255,232,0.8),
        0 0 16px rgba(0,255,232,0.6);
      background:rgba(0,0,0,0.4);
      backdrop-filter:blur(6px);
      padding:1rem 1.5rem;
      border-radius:0.75rem;
      max-width:80%;
      text-align:center;
      white-space:pre-wrap;
      margin-bottom:2rem;
    }

    /* N√∫t quay l·∫°i g√≥c tr√°i */
    .flex-top {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1001;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
    }
    .flex-top i { color:#0081AF; }
    .flex-top p {
      color:#0081AF;
      margin:0;
      font-size:1rem;
    }
  </style>
</head>
<body onload="subscribe_PepperQiMessaging();">
  <!-- giao di·ªán ch√≠nh -->
  <div id="container">
    <div style="position:absolute; top:10px; right:10px; cursor:pointer;" onclick="stopChitchat()">
      <i class="fa-solid fa-circle-question" style="color:#0081AF;"></i>
    </div>
    <div style="text-align:center; margin-top:20vh; margin-bottom:15%;">
      <h1 id="display" class="headline">
        Xin ch√†o, b·∫°n c√≥ mu·ªën tr√≤ chuy·ªán m·ªôt l√∫c kh√¥ng?
      </h1>
    </div>
    <div class="flex-area"
         style="position:absolute; bottom:10%; left:50%; transform:translateX(-50%); display:flex; gap:20px;">
      <button id="startChitBtn" class="custom-yes-btn bubble-bottom-right">
        Start Chitchat
      </button>
    </div>
  </div>

  <!-- GIF full-screen -->
  <div id="chitchatScreen">
    <img src="img/image.png" alt="Chitchat GIF">
  </div>

  <!-- Message full-screen -->
  <div id="messageScreen">
    <p id="messageText" class="long-text"></p>
    <div class="flex-top" onclick="stopChitchat()">
      <i class="fa-solid fa-angle-left fa-6x"></i>
      <p>Quay l·∫°i</p>
    </div>
  </div>

  <!-- scripts -->
  <script src="https://kit.fontawesome.com/54a1468923.js" crossorigin="anonymous"></script>
  <script>
    const messages = [
      "T√¥i hi·ªÉu r·∫±ng b·∫°n ƒëang c·∫£m th·∫•y r·∫•t bu·ªìn v√† th·∫•t v·ªçng. ƒêi·ªÅu n√†y th·∫≠t s·ª± kh√≥ khƒÉn, nh∆∞ng nh·ªõ r·∫±ng ƒë√¥i khi ch√∫ng ta c·∫ßn ph·∫£i ngh·ªâ ng∆°i ƒë·ªÉ l·∫•y l·∫°i nƒÉng l∆∞·ª£ng v√† tinh th·∫ßn. B·∫°n ho√†n to√†n x·ª©ng ƒë√°ng c√≥ m·ªôt kho·∫£ng th·ªùi gian ƒë·ªÉ h·ªìi ph·ª•c.",
      "Khi c√¥ng vi·ªác d·ªìn d·∫≠p, ch√∫ng ta d·ªÖ c·∫£m th·∫•y b·ª±c b·ªôi. M·ªôt trong nh·ªØng c√°ch hi·ªáu qu·∫£ ƒë·ªÉ gi·∫£m b·ªõt c·∫£m gi√°c n√†y l√† chia nh·ªè c√¥ng vi·ªác th√†nh nh·ªØng nhi·ªám v·ª• nh·ªè h∆°n, vi·ªác ho√†n th√†nh t·ª´ng ph·∫ßn c√¥ng vi·ªác nh·ªè s·∫Ω gi√∫p b·∫°n c·∫£m th·∫•y d·ªÖ ch·ªãu h∆°n. B·∫°n c≈©ng c√≥ th·ªÉ th·ª≠ ƒë·∫∑t ra m·ªôt kho·∫£ng th·ªùi gian c·ª• th·ªÉ ƒë·ªÉ ngh·ªâ ng∆°i gi·ªØa c√°c c√¥ng vi·ªác, ƒëi·ªÅu n√†y ƒë√£ ƒë∆∞·ª£c nhi·ªÅu chuy√™n gia t√¢m l√Ω khuy√™n d√πng ƒë·ªÉ gi·∫£m cƒÉng th·∫≥ng."
    ];
    let msgIndex = 0;

    function startChitchat() {
      document.getElementById('container').style.display = 'none';
      document.getElementById('chitchatScreen').style.display = 'block';
      msgIndex = 0;
      setTimeout(showMessage, 10000);
    }

    function showMessage() {
      const chit = document.getElementById('chitchatScreen'),
            msgS = document.getElementById('messageScreen'),
            el   = document.getElementById('messageText');

      // ƒë·ªïi background n·∫øu message th·ª© 2
      if (msgIndex === 1) {
        msgS.classList.add('face-bg');
      } else {
        msgS.classList.remove('face-bg');
      }

      chit.style.display = 'none';
      msgS.style.display = 'flex';    // b·∫≠t flex
      el.textContent = '';

      const text = messages[msgIndex];
      let i=0, speed=50;
      (function typeChar(){
        if (i < text.length) {
          el.textContent += text.charAt(i++);
          setTimeout(typeChar, speed);
        } else if (msgIndex < messages.length - 1) {
          setTimeout(() => {
            msgS.style.display = 'none';
            chit.style.display = 'block';
            msgIndex++;
            setTimeout(showMessage, 10000);
          }, 3000);
        }
      })();
    }

    function stopChitchat() {
      document.getElementById('messageScreen').style.display = 'none';
      document.getElementById('chitchatScreen').style.display = 'none';
      document.getElementById('container').style.display = 'block';
    }

    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('startChitBtn')
              .addEventListener('click', startChitchat);
    });
  </script>
</body>
</html>
